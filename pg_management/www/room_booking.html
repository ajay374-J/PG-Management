<head>
    <style>
        body {
        font-family: 'Arial', sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f4f4f4;
    }
    
    .container {
        max-width: 800px;
        margin: 50px auto;
        padding: 20px;
        background-color: #fff;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    
    h1, h2 {
        color: #333;
    }
    
    label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
    }
    
    input, select {
        width: 100%;
        padding: 8px;
        margin-bottom: 15px;
        box-sizing: border-box;
        border: 1px solid #ccc;
        border-radius: 4px;
    }
    
    button {
        background-color: #4caf50;
        color: #fff;
        padding: 10px 15px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    
    button:hover {
        background-color: #45a049;
    }
    
    hr {
        border: 0;
        height: 1px;
        background: #ddd;
        margin: 20px 0;
    }
    .card {
        border:solid;
        gap: 1rem;
    }
    .card {
    border: 1px solid #ddd;
    padding: 20px;
    border-radius: 8px;
    background-color: #fff;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    flex-grow: 1;
    }

    .card h3 {
        color: #333;
        margin-bottom: 10px;
    }

    .card p {
        color: #666;
        margin-bottom: 5px;
    }

    
    .out {
        display: flex;
        gap: 1rem;
        border:1px solid black;
    }
    
    .filling-form {
        display: none;
    }
    
    /* Add more styling as needed */
    
        
    </style>
    </head>
    <body>
    <div class="container">
        <h1>{{ title }}</h1>
    
        <h2>Check Room Availability</h2>
      
            <label for="check-in">Check-in Date:</label>
            <input type="date" id="check-in" name="check-in" value="{{ check_in_date }}" required>
    
            <label for="check-out">Check-out Date:</label>
            <input type="date" id="check-out" name="check-out" value="{{ check_out_date }}" required>
            <label for="room">Room Type:</label>
            <select name="room" id="room">
            <option value="single">Single</option>
            <option value="double">Double</option>
            <option value="triple">Triple</option>
            <option value="multiple">Multiple</option>
            </select>
            <button onclick="get_data()" type="submit">Check Availability</button>
    
       
        <hr>
        <div class="out" id="output"></div>
        <hr>
        <div class="filling-form" id="form-filling">
            <label for="r-no">Room No:</label>
            <input type="text" id="r-no" required>
            <br>
            <label for="frm-name">Full Name:</label>
            <input type="text" id="frm-name" required>
            <br>
            <label for="age">Age:</label>
            <input type="text" id="age" required>
            <br>
            <label for="gender">Gender:</label>
           <select name="gender" id="gender">
            <option value="Male">Male</option>
            <option value="Female">Female</option></select>
            <br>
            <label for="m-no">Mobile No:</label>
            <input type="text" id="m-no" required>
            <br>
            <label for="add">Address:</label>
            <input type="longtext" id="add" required>
            <button  type="submit">Submit</button>
            
        </div>
    </div>
    <script>
     
        async function get_data(){
            let check_in=document.getElementById('check-in').value
            let check_out=document.getElementById('check-out').value
            let room=document.getElementById('room').value
            let out=document.getElementById('output')
            console.log('check_in',check_in)
            console.log('check-out',check_out)
            console.log('room',room)
            console.log("api runnning")
            let res= await fetch (`api/method/pg_management.api.get_data?check_in=${check_in}&check_out=${check_out}&room=${room}`)
            console.log("rrr:,",res)
            let val=await res.json()
            // out.innerHTML=val.message
            console.log("res",val.message)
            out.innerHTML=''
            for (let i of val.message){
                let div=document.createElement('div')
                div.classList.add('card')
                let name=document.createElement('div')
                let avail=document.createElement('div')
                // let a=document.createElement('a')
                // a.href='http://localhost:8000/book-room/new'
                name.innerHTML=`${i.name}`
                if (i.available){
                    avail.innerHTML=`${i.available}`
                }
                div.onclick=()=>show_form(i.name,check_in,check_out,room)
                div.appendChild(name)
                div.appendChild(avail)
                console.log('i',i)
                // a.appendChild(div)
                // out.append(a)
                out.append(div)
            }
        }
    
        async function show_form(a,b,c,d){
            console.log('show_form',a,b,c)
            let frm=document.getElementById('form-filling')
            frm.style.display='block'
            // let out=document.getElementById('output')
            // out.style.display='none'
            let ip0=document.getElementById('r-no')
            let ip1=document.getElementById('frm-name').value
            let ip2=document.getElementById('age').value
            let ip3=document.getElementById('gender').value
            let ip4=document.getElementById('m-no').value
            let ip5=document.getElementById('add').value
            let out=document.getElementById('output')
            var submit= document.getElementById('submit');

            if (submit) {
                submit.addEventListener('click', show_form(a,b,c,d,ip0,ip1,ip2,ip3,ip4,ip5));
            }
            let res= await fetch (`api/method/pg_management.api.get_data?check_in=${b}&check_out=${c}&room=${d}&r_no=${a}&r_no=${ip1}$f_name=$(),age,gender,m_no,address`)
    
            ip0.value=a
        }
    </script>
    </body>